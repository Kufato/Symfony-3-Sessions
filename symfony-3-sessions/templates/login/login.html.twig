{% extends 'base.html.twig' %}

{% block title %}Login{% endblock %}

{% block content %}
    <div style="display:flex; flex-direction:column; justify-content:center; align-items:center; min-height:60vh; gap:1.5rem; text-align:center; max-width:400px; margin:0 auto;">

        {% if error %}
            <div style="color:red; background:#ffe5e5; padding:0.75rem 1rem; border-radius:0.5rem; width:100%;">
                {{ error.messageKey|trans(error.messageData, 'security') }}
            </div>
        {% endif %}

        {% if app.user %}
            <div>
                You are logged in as <strong>{{ app.user.username }}</strong>,
                <a href="{{ path('app_logout') }}">Logout</a>
            </div>
        {% endif %}

        <h2 style="font-size:2rem; color:#333;">Please sign in</h2>

        <form method="post" style="display:flex; flex-direction:column; gap:1rem; width:100%;">

            <div style="display:flex; flex-direction:column; gap:0.25rem;">
                <label for="username">Username</label>
                <input
                    type="text"
                    name="_username"
                    id="username"
                    value="{{ last_username }}"
                    required
                    autofocus
                    style="padding:0.5rem; border-radius:0.5rem; border:1px solid #ccc; font-size:1rem;"
                >
            </div>

            <div style="display:flex; flex-direction:column; gap:0.25rem;">
                <label for="password">Password</label>
                <input
                    type="password"
                    name="_password"
                    id="password"
                    required
                    style="padding:0.5rem; border-radius:0.5rem; border:1px solid #ccc; font-size:1rem;"
                >
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <button type="submit" style="
                background:#f7ae02;
                color:#fff;
                border:none;
                padding:0.75rem 2rem;
                font-size:1rem;
                border-radius:0.5rem;
                cursor:pointer;
                transition:0.2s;
            " onmouseover="this.style.background='#e89b00'" onmouseout="this.style.background='#f7ae02'">
                Sign in
            </button>
        </form>

        <div style="margin-top:1rem;">
            Don't have an account ?
            <a href="{{ path('app_registration') }}" style="
                text-decoration:none;
                color:#007bff;
                transition:0.2s;
            " onmouseover="this.style.color='#0056b3'" onmouseout="this.style.color='#007bff'">
                Register
            </a>
        </div>
    </div>
{% endblock %}
